buildscript {
    ext {
        gitVersion = '0.5.2'
        springBootVersion = '1.5.1.RELEASE'
        dockerPluginVersion = '3.0.5'
    }
    repositories {
        mavenCentral()
        jcenter()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath("gradle.plugin.com.palantir.gradle.gitversion:gradle-git-version:${gitVersion}")
        classpath("com.bmuschko:gradle-docker-plugin:${dockerPluginVersion}")
        classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
    }
}

apply plugin: 'com.palantir.git-version'

def versionDetails = versionDetails()
version "${versionDetails.lastTag}-${versionDetails.gitHash}"

subprojects {
    apply plugin: "java"
    apply plugin: "io.spring.dependency-management"

    repositories {
        mavenCentral()
    }

    dependencyManagement {
        imports {
            mavenBom "org.springframework.boot:spring-boot-starter-parent:${springBootVersion}"
        }
    }
}
